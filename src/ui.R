library(shiny)

.Q <<- new.env()
source('R/mapBinding.R')
source('R/jsBinding.R')

shinyUI(
    fluidPage(
        id="page",
        title="LSpace",
        tags$head(
            tags$link(rel="icon",href="Q.png"),
            #CSS
            tags$link(rel="stylesheet",href="css/lib/mapjs-default-styles.css"),
            tags$link(rel="stylesheet",href="js/lib/jquery-ui/jquery-ui.min.css"),
            tags$link(rel="stylesheet",href="css/prompt.css"),
            tags$link(rel="stylesheet",href="css/panels.css"),
            tags$link(rel="stylesheet",href="css/maps.css"),
            tags$link(rel="stylesheet",href="css/mobile.css"),
            tags$link(rel="stylesheet",href="css/colors.css"),
            #JS
            tags$script(src = "js/lib/jquery-2.0.2.min.js"),
            tags$script(src = "js/lib/jquery.nicescroll.min.js"),
            tags$script(src = "js/lib/jquery-ui/jquery-ui.min.js"),
            tags$script(src = "js/interface.js"),
            withMathJax()
        ),
        #Tabs
        div(id='tabs-wrapper',
            tabsetPanel(id="tabs",
                        selected="Queries",
                        tabPanel("Names",value="Names",icon=icon("sitemap",class='fa-2x'),.Q$mapInput("Names",value='{"title":"Names","id":1,"formatVersion":2,"ideas":{"11":{"title":"Units","id":3},"21":{"title":"Formula","id":4},"31":{"title":"Views","id":5},"41":{"title":"Styles","id":6},"51":{"title":"Tests","id":7},"61":{"title":"Sources","id":8},"5.5":{"title":"Data","id":9,"attr":{"style":{}}}},"links":[]}')),
                        tabPanel("Sources",value="Sources",icon=icon("code-fork",class='fa-2x'),.Q$mapInput("Sources")),
                        tabPanel("Tests",value="Tests",icon=icon("tachometer",class='fa-2x'),.Q$mapInput("Tests")), 
                        tabPanel("Styles",value="Styles",icon=icon("fire",class='fa-2x'),.Q$mapInput("Styles",value='{"title":"Styles","id":1,"formatVersion":2,"ideas":{"11":{"title":"maps","id":4,"ideas":{"1":{"title":"tray","id":11,"attr":{"position":[99.5,200,5],"style":{}}},"0.5":{"title":"map colors","id":5,"attr":{"style":{},"position":[69.5,-311,4]}}},"attr":{"style":{}}},"-0.5":{"title":"panels","id":2,"ideas":{"1":{"title":"console","id":6},"2":{"title":"console plot","id":7},"3":{"title":"database","id":8},"4":{"title":"R help","id":9}},"attr":{"position":[178.5,-230,1],"style":{}}},"-11":{"title":"Q prompt","id":12,"attr":{"style":{},"position":[268.5,255,2]}}}}')),
                        tabPanel("Views",value="Views",icon=icon("eye",class='fa-2x'),.Q$mapInput("Views",value='{"title":"Views","id":1,"formatVersion":2,"ideas":{"10":{"title":"ggplot(mtcars, aes(wt, mpg)) + geom_line(aes(colour=hp,size=disp))","id":6,"attr":{"style":{}}},"11":{"title":"","id":8,"attr":{"icon":{"url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAMeCAMAAABcDUyXAAAB+1BMVEX9/v0AAAATK0MULkcVL0gVMEkVMEoWMUsWMk0XNE8XNVAYNlIZOFQaOVYbO1gbO1kbPFocPVwcPlwdP14eQGAeQWEeQmIfQ2MfQ2QgRWYgRmghR2kiSWsiSWwiSm0jTG8kTnIlT3MmUHUmUncnU3koVXsoVXwoVn0pWH8qWYEqW4MrXIUsXYctX4ktYIsuYYwuYo0vY48vZJAwZZExZ5QyaJUyapczbJo0bZs1b541b582cKA3cqI3c6U4dKY5dqk6eKs7ea07e688e7A8fLE9frQ+gLY/gbg/g7k/g7pAhLxBhr5BiMFCicJDi8VDjcdERERERE5ERFhERF5ERHdETmJEWGxEXpBEd6dEjMZEjslFkMxGks5Hk9BHldJIl9RJmNdKmthLnNtLndxMn99OREROWFhOYnVOoeJOouNPpOZQpuhRqOpSqexVsfdYRERYTmJYbH9eREReRHdekL1iTkRidWxidXVidX9sWERsdWJsf2xsf3Vsf391Yk51bGx1dWJ1dX91f2x1f3V1f393RER3d3d3kL13p9N/bFh/dWJ/dXV/f2x/f3V/f3+QXkSQd5CQkKeQp9OQvdOnd0SnkJCnp6enp9On072n09O9kF69kHe9vZC9vb2906e9072909PTp3fTvZDTvb3T06fT073T09Py8vL///9LeIu8AAAAqXRSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////1m2UmwAAAAlwSFlzAAALEgAACxIB0t1+/AAAIABJREFUeJzt3Yl7HEdexvElwHCzJrBE4T7NjQg35jaXuceyJSvcl1acMg4SiYmdzeE0srHHAXshNrCxzUbWn0lXd81Md/VV1VXVV33fJ4mlGfl9uvL7qKen5/rEnASdT/S9AaTfACDwACDwACDwACDwACDwACDwACDwACDwACDwACDwACDw1ALYWSzuHc3n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","width":192,"height":300,"position":"left"},"style":{}}},"-1":{"title":"$$\\\\left( \\\\sum_{k=1}^n a_k b_k \\\\right)^2 \\\\leq \\\\left( \\\\sum_{k=1}^n a_k^2 \\\\right) \\\\left( \\\\sum_{k=1}^n b_k^2 \\\\right)$$","id":7}},"links":[]}')),
                        tabPanel("Data",value="Data",icon=icon("table",class='fa-2x'),dataTableOutput("Data")),
                        tabPanel("Queries",value="Queries",icon=icon("crosshairs",class='fa-2x'),.Q$mapInput("Queries",value='{"title":"Queries","id":1,"formatVersion":2,"ideas":{"5.5":{"title":"draw","id":43,"ideas":{"2":{"title":"Data","id":2,"ideas":{"3":{"title":"mtcars","id":11,"attr":{"style":{}}}},"attr":{"style":{}}},"5":{"title":"Views","id":5,"ideas":{"4":{"title":"$","id":44,"ideas":{"1":{"title":"My.Views","id":26,"ideas":{},"attr":{"style":{}}}}}},"attr":{"style":{}}},"6":{"title":"Styles","id":6,"ideas":{"4":{"title":"$","id":45,"ideas":{"1":{"title":"My.Styles","id":27,"ideas":{},"attr":{"style":{}}}}}},"attr":{"style":{}}},"7":{"title":"Tests","id":7,"ideas":{"4":{"title":"$","id":46,"ideas":{"1":{"title":"My.Tests","id":28,"ideas":{},"attr":{"style":{}}}}}},"attr":{"style":{}}},"8":{"title":"Sources","id":8,"ideas":{"4":{"title":"$","id":29,"ideas":{"1":{"title":"My.Sources","id":47}},"attr":{"style":{}}}},"attr":{"style":{}}},"9":{"title":"Names","id":9,"ideas":{"4":{"title":"ls","id":51,"attr":{"style":{}}}},"attr":{"style":{}}}},"attr":{"style":{}}}},"links":[]}'))    
                        ),
            div(id='tray',
                actionButton("save","",icon=icon("save")),
                actionButton("redo","",icon=icon("undo",class="fa-flip-horizontal")),
                actionButton("undo","",icon=icon("undo")),
                actionButton("run","",icon=icon("play")),
                actionButton("print","",icon=icon("external-link",class="fa-flip-horizontal"))
            )
                        ),
        #Panels
        tabsetPanel(id="panels",
                    type="pills",
                    selected="console",
                    tabPanel("Q",value="Q"),
                    tabPanel("",value="help",icon=icon("question-circle"),
                             div(id="help-panel",
                                 uiOutput("help")
                             )
                    ),
                    tabPanel("",value="config",icon=icon("cogs"),
                             div(id='config-panel',
                                 tableOutput("database"),
                                 .Q$jsInput("db.save",'db.save'),
                                 .Q$jsInput("db.load",'db.load'),
                                 .Q$jsInput("js",'js'),
                                 .Q$jsInput("js.error",'js.error'),
                                 numericInput("panelWidth","panel.width",64),
                                 numericInput("panelHeight","panel.height",950)
                             )
                    ),
                    tabPanel("",value="plot",icon=icon("bar-chart-o"),
                             plotOutput("plot")       
                    ),
                    tabPanel("",value="console",icon=icon("chevron-right"),
                             div(id="console-panel",
                                 div(id="fadeup"),
                                 uiOutput("console")
                             )
                    )
                    
        ),
        #Prompt
        div(id="prompt-box",
            textInput("prompt",">",""),
            actionButton("submit", "")
        )
            )
        )